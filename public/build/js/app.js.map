{"version":3,"sources":["app.js"],"names":["ls","localStorage","$panelAdmin","document","querySelector","$btnMenu","$opcionesMenu","querySelectorAll","textoOpciones","iniciarApp","quitarAlerta","mostrarConfirmacionEliminar","colapsarMenu","storageMenu","mostrarEstadisticas","location","pathname","mostrarGraficaVentas","mostrarGraficaUsuarios","mostrarGraficaEstados","async","url","res","fetch","json","estados","map","ESTADO","mostrarGrafica","NRO_HABITACIONES","parseInt","error","console","log","meses","MES","VENTA_MES","scales","y","beginAtZero","chart","type","labels","label","data","backgroundColor","borderColor","options","ctx","getElementById","getContext","Chart","datasets","borderWidth","$alerta","body","contains","includes","setTimeout","classList","add","remove","$formularioEliminar","mostrarConfirmacion","hoverBtnMenu","addEventListener","e","forEach","$opcionMenu","i","lastChild","textContent","parentElement","style","gridTemplateColumns","setItem","nextElementSibling","getItem","innerHTML","$elemento","textButtonHover","textButton","transition","target","fontSize","fontWeight","$formDelete","textConfirm","formulario","preventDefault","modalConfirmacion","formDelete","title","Swal","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","customClass","popup","htmlContainer","actions","confirmButton","cancelButton","then","result","isConfirmed","submit"],"mappings":"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","file":"app.js","sourcesContent":["const ls = localStorage;\r\nconst $panelAdmin = document.querySelector('.panel-admin');\r\nconst $btnMenu = document.querySelector('.boton-menu');\r\nconst $opcionesMenu = document.querySelectorAll('.navegacion summary');\r\nlet textoOpciones = [];\r\n\r\ndocument.addEventListener('DOMContentLoaded',() => iniciarApp());\r\n\r\n\r\n\r\nfunction iniciarApp(){\r\n  quitarAlerta(); //? Quita una alerta despues de unos segundos\r\n  mostrarConfirmacionEliminar(); //? Muestra Modal de confirmacion \r\n  colapsarMenu(); //? Colapsa el menu de navegación\r\n  storageMenu(); //? Cargando Storage del colapso del menu\r\n  mostrarEstadisticas(); //? Muestra los graficos estadisticos\r\n} \r\n\r\n// TODO: Funcionalidades de Reportes estadisticos\r\nfunction mostrarEstadisticas() {\r\n  if (location.pathname === '/estadisticas') {\r\n    mostrarGraficaVentas();\r\n    mostrarGraficaUsuarios();\r\n    mostrarGraficaEstados();\r\n  }\r\n}\r\n\r\nasync function mostrarGraficaEstados() {\r\n  try {\r\n     const url = 'http://127.0.0.1:3000/api/estados';\r\n     const res = await fetch(url);\r\n     const json = await res.json();\r\n    // console.log(json);\r\n    \r\n    const estados = json.map(({ ESTADO }) => ESTADO);\r\n    // console.log(estados);\r\n\r\n    const nroHabitaciones = json.map(({ NRO_HABITACIONES }) => parseInt(NRO_HABITACIONES));\r\n    // console.log(nroHabitaciones);\r\n\r\n\r\n\r\n    let datosEstados = [\r\n      'graficoEstados',\r\n      'doughnut',\r\n      estados,\r\n      'N° habitaciones por Estado',\r\n      nroHabitaciones,\r\n      [\r\n        '#329f00',\r\n        '#b8a11e',\r\n        '#cb0000',\r\n        '#2020d9'\r\n      ],\r\n      '#fff'\r\n    ];\r\n\r\n    mostrarGrafica(...datosEstados);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nasync function mostrarGraficaUsuarios() {\r\n  try {\r\n   /*  const url = 'http://127.0.0.1:3000/api/usuarios';\r\n    const res = await fetch(url);\r\n    const json = await res.json(); */\r\n    // console.log(json);\r\n\r\n\r\n\r\n    let datosUsuarios = [\r\n      'graficoUsuarios',\r\n      'bar',\r\n      ['Admin','Cliente','Empleado','Proveedor'],\r\n      'N° de Usuarios según su Rol',\r\n      [1,5,3,2],\r\n      [\r\n        '#14192D80',\r\n        '#00808080',\r\n        '#CD5C5C80',\r\n        '#222'\r\n      ],\r\n      [\r\n        '#14192D',\r\n        '#008080',\r\n        '#CD5C5C',\r\n        '#222'\r\n      ]\r\n    ];\r\n\r\n    mostrarGrafica(...datosUsuarios);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n  \r\n\r\nasync function mostrarGraficaVentas() {\r\n  try {\r\n    const url = 'http://127.0.0.1:3000/api/ventas';\r\n    const res = await fetch(url);\r\n    const json = await res.json();\r\n    // console.log(json);\r\n\r\n    const meses = json.map(({ MES }) => {\r\n      let mes = parseInt(MES);\r\n\r\n      switch (mes) {\r\n        case 1:\r\n          return 'Enero';\r\n        case 2:\r\n          return 'Febrero';\r\n        case 3:\r\n          return 'Marzo';\r\n        case 4:\r\n          return 'Abril';\r\n        case 5:\r\n          return 'Mayo';\r\n        case 6:\r\n          return 'Junio';\r\n        case 7:\r\n          return 'Julio';\r\n        case 8:\r\n          return 'Agosto';\r\n        case 9:\r\n          return 'Septiembre';\r\n        case 10:\r\n          return 'Octubre';\r\n        case 11:\r\n          return 'Noviembre';\r\n        case 12:\r\n          return 'Diciembre';\r\n        default:\r\n          break;\r\n      }\r\n\r\n    });\r\n    // console.log(meses);\r\n\r\n    const ventasMes = json.map(({ VENTA_MES }) => parseInt(VENTA_MES));\r\n    // console.log(ventasMes);\r\n\r\n\r\n\r\n    let datosVenta = [\r\n      'graficoVentas',\r\n      'line',\r\n      meses,\r\n      'Ventas por mes',\r\n      ventasMes,\r\n      '#b8a11e',\r\n      '#b8a11e80',\r\n      {\r\n        scales: {\r\n          y: {\r\n            beginAtZero: true\r\n          }\r\n        },\r\n      }\r\n    ];\r\n\r\n    mostrarGrafica(...datosVenta);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction mostrarGrafica(chart,type,labels,label,data,backgroundColor,borderColor,options) {\r\n  const ctx = document.getElementById(chart).getContext('2d');\r\n  // console.log(ctx);\r\n  const myChart = new Chart(ctx, {\r\n    type,\r\n    data: {\r\n      labels,\r\n      datasets: [{\r\n        label,\r\n        data,\r\n        backgroundColor,\r\n        borderColor,\r\n        borderWidth: 1\r\n      }]\r\n    },\r\n    options,\r\n  });\r\n\r\n  // return myChart;\r\n  \r\n}\r\n\r\n\r\n// TODO: Funcionalidades de Reservas de Admin \r\nfunction quitarAlerta(){\r\n  const $alerta = document.querySelector('.alerta');\r\n  \r\n  if (document.body.contains($alerta) && !location.pathname.includes('/crear') &&\r\n  !location.pathname.includes('/actualizar')) {\r\n    setTimeout(() => {\r\n      $alerta.classList.add('active');\r\n    }, 3000);\r\n\r\n    setTimeout(() => {\r\n      $alerta.remove();\r\n    }, 4000);\r\n  }\r\n}\r\n\r\n\r\nfunction mostrarConfirmacionEliminar(){\r\n  const $formularioEliminar = document.querySelectorAll('.formulario-eliminar');\r\n  \r\n  if (location.pathname === '/usuarios') {\r\n    mostrarConfirmacion($formularioEliminar,'¿Estas seguro que quieres eliminar un usuario?');\r\n  }else if (location.pathname === '/habitaciones') {\r\n    mostrarConfirmacion($formularioEliminar,'¿Estas seguro que quieres eliminar una habitación?');\r\n  }else if(location.pathname === '/clientes'){\r\n    mostrarConfirmacion($formularioEliminar,'¿Estas seguro que quieres eliminar un cliente?');\r\n  }else if(location.pathname === '/huespedes'){\r\n    mostrarConfirmacion($formularioEliminar,'¿Estas seguro que quieres eliminar un huésped?');\r\n  }else{\r\n    return;\r\n  }\r\n\r\n  \r\n\r\n}\r\n\r\nfunction colapsarMenu(){\r\n  \r\n  hoverBtnMenu($btnMenu,'&larr;','Menú de Administración'); \r\n\r\n  $btnMenu.addEventListener('click', e => {\r\n    \r\n    $opcionesMenu.forEach(($opcionMenu,i) => {\r\n      textoOpciones = [...textoOpciones,$opcionMenu.lastChild.textContent];\r\n      \r\n      if ($opcionMenu.parentElement.classList.contains('active')) {\r\n        hoverBtnMenu($btnMenu, '&larr;', 'Menú de Administración'); \r\n        $panelAdmin.style.gridTemplateColumns = '20% 80%';  \r\n        ls.setItem('menuColapsado','20% 80%');\r\n        $opcionMenu.lastChild.textContent = textoOpciones[i];\r\n        $opcionMenu.parentElement.classList.remove('active');\r\n        $opcionMenu.nextElementSibling.classList.remove('active');\r\n        \r\n      } else {\r\n        hoverBtnMenu($btnMenu, '&rarr;', '&rarr;'); \r\n        $panelAdmin.style.gridTemplateColumns = '8% 92%';\r\n        ls.setItem('menuColapsado', '8% 92%');\r\n        $opcionMenu.lastChild.textContent = '';\r\n        $opcionMenu.parentElement.classList.add('active')\r\n        $opcionMenu.nextElementSibling.classList.add('active');\r\n        \r\n      }\r\n    });\r\n  });\r\n\r\n}\r\n\r\nfunction storageMenu() {\r\n\r\n  if (ls.getItem(\"menuColapsado\") === null) { //si no existe la variable 'menuColapsado' en el localStorage\r\n    ls.setItem('menuColapsado', '20% 80%');\r\n  }\r\n\r\n\r\n  if (ls.getItem(\"menuColapsado\") === \"20% 80%\") { \r\n    $opcionesMenu.forEach(($opcionMenu, i) => {\r\n      textoOpciones = [...textoOpciones, $opcionMenu.lastChild.textContent];\r\n      \r\n      hoverBtnMenu($btnMenu, '&larr;', 'Menú de Administración');\r\n      $panelAdmin.style.gridTemplateColumns = '20% 80%';\r\n      ls.setItem('menuColapsado', '20% 80%');\r\n      $opcionMenu.lastChild.textContent = textoOpciones[i];\r\n      $opcionMenu.parentElement.classList.remove('active');\r\n      $opcionMenu.nextElementSibling.classList.remove('active');\r\n    });\r\n    \r\n  }\r\n  \r\n  if (ls.getItem(\"menuColapsado\") === \"8% 92%\") {\r\n    $btnMenu.innerHTML = '&rarr;';\r\n    \r\n    $opcionesMenu.forEach(($opcionMenu, i) => {\r\n      textoOpciones = [...textoOpciones, $opcionMenu.lastChild.textContent];\r\n\r\n      hoverBtnMenu($btnMenu, '&rarr;', '&rarr;');\r\n      $panelAdmin.style.gridTemplateColumns = '8% 92%';\r\n      ls.setItem('menuColapsado', '8% 92%');\r\n      $opcionMenu.lastChild.textContent = '';\r\n      $opcionMenu.parentElement.classList.add('active')\r\n      $opcionMenu.nextElementSibling.classList.add('active');\r\n    });\r\n  \r\n  }\r\n  // console.log(textoOpciones);\r\n}\r\n\r\nfunction hoverBtnMenu($elemento,textButtonHover,textButton){\r\n  $elemento.style.transition = 'all 0.4s ease-in';\r\n\r\n  //* Evento que se emite al entrar el cursor al elemento\r\n  $elemento.addEventListener('mouseover',e => {\r\n    e.target.style.fontSize = '1.6rem';\r\n    e.target.style.fontWeight = '700';\r\n    e.target.innerHTML = textButtonHover;\r\n      \r\n  \r\n  });\r\n  \r\n  //* Evento que se emite al sacar el cursor del elemento\r\n  $elemento.addEventListener('mouseout',e => {\r\n    e.target.style.fontSize = '1.6rem';\r\n    e.target.innerHTML = textButton;\r\n      \r\n  });\r\n}\r\n\r\nfunction mostrarConfirmacion($formDelete,textConfirm){\r\n  $formDelete.forEach(formulario => {\r\n    formulario.addEventListener('submit',e => {\r\n      e.preventDefault();\r\n      modalConfirmacion(e.target,textConfirm);\r\n    });\r\n  });\r\n}\r\n\r\n\r\nfunction modalConfirmacion(formDelete,title){\r\n  Swal.fire({\r\n    title,\r\n    text: \"¡No podrás revertir esto!\",\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonColor: '#3085d6',\r\n    cancelButtonColor: '#d33',\r\n    confirmButtonText: '¡Si, Elimínalo!',\r\n    cancelButtonText: 'Cancelar',\r\n    customClass: {\r\n      popup: 'modal',\r\n      icon: 'modal-icon',\r\n      title: 'modal-title',\r\n      htmlContainer: 'modal-warning',\r\n      actions: 'modal-btns',\r\n      confirmButton: 'modal-btn-confirm',\r\n      cancelButton: 'modal-btn-cancel',\r\n    },\r\n  }).then((result) => {\r\n    if (result.isConfirmed) {\r\n      formDelete.submit();\r\n    }\r\n  });\r\n}"]}
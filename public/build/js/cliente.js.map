{"version":3,"sources":["cliente.js"],"names":["paso","pasoInicial","pasoFinal","reserva","id","nombre","fechaLlegada","fechaSalida","subtotal","total","servicios","iniciarApp","mostrarSeccion","tabs","botonesPaginador","paginaAnterior","paginaSiguiente","consultaAPI","idCliente","nombreCliente","seleccionarFechaLlegada","seleccionarFechaSalida","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","add","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","async","url","resultado","fetch","mostrarServicios","json","error","console","log","servicio","tipo","precio","descripcion","tipo_cama","nombreServicio","createElement","textContent","precioServicio","descripcionServicio","camaServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","divServicio","some","agregado","filter","rut","value","mostrarAlerta","Date","getUTCDay","horaReserva","toLocaleTimeString","hour","minute","hora","split","horaFecha","join","resumen","firstElementChild","removeChild","Object","values","includes","length","headingServicios","contenedorServicio","tipoServicio","innerHTML","headingReserva","fechaLlegadaObj","fechaSalidaObj","fechaLlegadaFormateada","formatearFecha","fechaSalidaFormateada","entradaReserva","salidaReserva","costoReserva","botonReservar","reservarHabitacion","fecha","toLocaleString","weekday","year","month","day","tipoServicios","map","datos","FormData","append","respuesta","method","body","Swal","fire","icon","title","text","button","customClass","popup","htmlContainer","actions","confirmButton","then","setTimeout","location","reload","mensaje","elemento","desaparece","alertaPrevia","alerta","referencia"],"mappings":"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","file":"cliente.js","sourcesContent":["let paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\n\r\n//* Objeto de plantilla en donde se guardará la info seleccionada por el usuario\r\nconst reserva = {\r\n  id: '',\r\n  nombre: '',\r\n  fechaLlegada: '',\r\n  fechaSalida: '',\r\n  subtotal: 0,\r\n  total: 0,\r\n  servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded',() => iniciarApp());\r\n\r\n\r\n\r\nfunction iniciarApp(){\r\n  mostrarSeccion(); //* Muestra y oculta las secciones\r\n  tabs(); //* Cambia la sección cuando se presionen los tabs\r\n  botonesPaginador(); //* Agrega o quita los botones del paginador\r\n  paginaAnterior(); //* Boton que traslada a la sección anterior si es que la hay\r\n  paginaSiguiente();  //* Boton que traslada a la sección siguiente si es que la hay\r\n\r\n  consultaAPI(); //* Consulta la API para mostrar todos los servicios\r\n  \r\n  idCliente(); //* Añade el id del cliente del input al objeto 'reserva'\r\n  nombreCliente(); //* Añade el nombre del cliente del input al objeto 'reserva'\r\n  seleccionarFechaLlegada(); //* Añade la fecha de Llegada de la reserva del input al objeto 'reserva'\r\n  seleccionarFechaSalida(); //* Aña la  la fecha de salida de la reserva del input al objeto 'reserva'\r\n\r\n  mostrarResumen(); //* Muestra el resumen de la reserva\r\n\r\n} \r\n\r\n// TODO: Funcionalidades de Reservas de Cliente\r\nfunction mostrarSeccion(){\r\n  //* Ocultar las secciones que no corresponden a su respectivo tab\r\n  const seccionAnterior = document.querySelector('.mostrar');\r\n  \r\n  if (seccionAnterior) { //* Si existe una seccion con la clase .mostrar ....\r\n    seccionAnterior.classList.remove('mostrar');\r\n  }\r\n  \r\n  //* Seleccionar la seccion con el paso\r\n  const seccion = document.querySelector(`#paso-${paso}`);\r\n  seccion.classList.add('mostrar');\r\n  \r\n   //* Ocultar los tabs que no corresponden a su respectiva seccion\r\n  const tabAnterior = document.querySelector('.actual');\r\n  tabAnterior.classList.remove('actual');\r\n\r\n  //* Resalta el tab actual\r\n  const tab = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n  tab.classList.add('actual');\r\n\r\n\r\n}\r\n\r\nfunction tabs(){\r\n  const botones = document.querySelectorAll('.tabs button'); //* todos los <button> de la navegacion\r\n\r\n  botones.forEach(boton => {\r\n    boton.addEventListener('click',e => {\r\n      paso = parseInt(e.target.dataset.paso); //* Guarda data-attribute del boton clickeado\r\n\r\n      mostrarSeccion();\r\n\r\n      botonesPaginador(); \r\n    });\r\n\r\n  });\r\n}\r\n\r\nfunction botonesPaginador(){\r\n  const paginaAnterior = document.querySelector('#anterior');\r\n  const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n  if (paso === 1) {\r\n    paginaAnterior.classList.add('ocultar');\r\n    paginaSiguiente.classList.remove('ocultar');\r\n  }else if(paso === 2) {\r\n    paginaAnterior.classList.remove('ocultar');\r\n    paginaSiguiente.classList.remove('ocultar');\r\n  }else if(paso === 3) {\r\n    paginaAnterior.classList.remove('ocultar');\r\n    paginaSiguiente.classList.add('ocultar');\r\n    mostrarResumen(); //* Mostrando sección de resumen\r\n  }\r\n\r\n  mostrarSeccion();\r\n}\r\n\r\nfunction paginaAnterior(){\r\n  const paginaAnterior = document.querySelector('#anterior');\r\n\r\n  paginaAnterior.addEventListener('click',() => {\r\n    if (paso <= pasoInicial) return;\r\n    \r\n    // console.log(paso);\r\n    paso--;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n  const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n  paginaSiguiente.addEventListener('click',() => {\r\n    if (paso >= pasoFinal) return;\r\n\r\n    // console.log(paso);\r\n    paso++;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nasync function consultaAPI(){\r\n  try {\r\n    const url = 'http://127.0.0.1:3000/api/habitaciones';\r\n    const resultado = await fetch(url); //* Esperando a que se devuelva la petición completa\r\n    const servicios = await resultado.json();\r\n    // console.log(servicios);\r\n\r\n    mostrarServicios(servicios);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction mostrarServicios(servicios) {\r\n  servicios.forEach(servicio => {\r\n    const {id, tipo, precio, descripcion, tipo_cama } = servicio;\r\n\r\n    const nombreServicio = document.createElement('p');\r\n    nombreServicio.classList.add('nombre-servicio','third-text-color');\r\n    nombreServicio.textContent = `Habitación ${tipo}`;\r\n\r\n    const precioServicio = document.createElement('p');\r\n    precioServicio.classList.add('precio-servicio','text-left');\r\n    precioServicio.textContent = `$${precio}`;\r\n\r\n    const descripcionServicio = document.createElement('p');\r\n    descripcionServicio.classList.add('descripcion-servicio','text-left');\r\n    descripcionServicio.textContent = descripcion;\r\n    \r\n    const camaServicio = document.createElement('p');\r\n    camaServicio.classList.add('cama-servicio','text-left');\r\n    camaServicio.textContent = `Cama ${tipo_cama}`;\r\n\r\n    const servicioDiv = document.createElement('div');\r\n    servicioDiv.classList.add('servicio');\r\n    servicioDiv.dataset.idServicio = id;\r\n    servicioDiv.onclick = () => seleccionarServicio(servicio);\r\n\r\n    servicioDiv.appendChild(nombreServicio);\r\n    servicioDiv.appendChild(descripcionServicio);\r\n    servicioDiv.appendChild(camaServicio);\r\n    servicioDiv.appendChild(precioServicio);\r\n\r\n    document.querySelector('#servicios').appendChild(servicioDiv);\r\n    \r\n  });\r\n}\r\n\r\nfunction seleccionarServicio(servicio){\r\n  const { id,precio } = servicio; //* Id de servicio seleccionado\r\n  const { servicios } = reserva; //* Arreglo de servicios a llenar\r\n\r\n  //* Identificando al elemento que se le da click \r\n  const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n  // console.log(divServicio);\r\n\r\n  //? Comprobar si un servicio ya fue agregado\r\n  if (servicios.some(agregado => agregado.id === id)) { //*Si el id que existe en memoria es igual al agregar\r\n    //* Eliminar servicio\r\n    reserva.servicios = servicios.filter(agregado => agregado.id !== id);\r\n    divServicio.classList.remove('seleccionado');\r\n    reserva.total -= parseInt(precio);\r\n    reserva.subtotal -= parseInt(precio);\r\n  }else{ //* Si no son iguales los Ids\r\n    //* Agregar servicio \r\n    reserva.servicios = [...servicios, servicio]; //* Agregando nuevo servicio y servicios que existian ya\r\n    divServicio.classList.add('seleccionado');\r\n    reserva.total += parseInt(precio);\r\n    reserva.subtotal += parseInt(precio);\r\n  }\r\n  \r\n\r\n\r\n\r\n  // console.log(servicio);\r\n  console.log(reserva);\r\n\r\n}\r\n\r\nfunction idCliente(){\r\n  const selectEmpresa = document.querySelector('#empresa');\r\n  \r\n  selectEmpresa.addEventListener('input',e => {\r\n    const rut = parseInt(e.target.value);\r\n    // console.log(rut);\r\n    \r\n    if (!rut) {\r\n      mostrarAlerta('La empresa es obligatoria','error','.formulario');\r\n    }else{\r\n      reserva.id = rut;\r\n    }\r\n  });\r\n}\r\n\r\n\r\nfunction nombreCliente(){\r\n  const nombre = document.querySelector('#nombre').value;\r\n  reserva.nombre = nombre;\r\n  // console.log(reserva);\r\n}\r\n\r\nfunction  seleccionarFechaLlegada(){\r\n  const inputFechaLlegada = document.querySelector('#fecha_llegada');\r\n  // console.log(inputFecha);\r\n  inputFechaLlegada.addEventListener('input',(e) => {\r\n    //* Guardando dia de la semana de la fecha seleccionada\r\n    const dia = new Date(e.target.value).getUTCDay(); \r\n\r\n    //* Guardando hora del input\r\n    const horaReserva = new Date(e.target.value)\r\n          .toLocaleTimeString([],{hour: '2-digit', minute: '2-digit'});\r\n    const [hora ,] = horaReserva.split(':');\r\n\r\n    //* Guardando hora y fecha \r\n    const horaFecha = e.target.value.split('T').join(' ');\r\n\r\n    // console.log(dia);\r\n    // console.log(horaReserva);\r\n    // console.log(hora);\r\n    // console.log(e.target.value);\r\n\r\n    //* Si la hora está en el rango de 10:00 a 22:00 ...\r\n    if(hora < 10 || hora > 22){\r\n      mostrarAlerta('Hora no válida','error','.formulario');\r\n      e.target.value = ''; //* Dejando el input fecha vacío\r\n    }else{ //* Si no...\r\n      reserva.fechaLlegada = horaFecha; //* Guardando fecha y hora seleccionada en objeto 'reserva'\r\n    }\r\n  \r\n  });\r\n}\r\n\r\nfunction seleccionarFechaSalida(){\r\n  const inputFechaSalida = document.querySelector('#fecha_salida');\r\n  // console.log(inputFecha);\r\n  inputFechaSalida.addEventListener('input',(e) => {\r\n    //* Guardando dia de la semana de la fecha seleccionada\r\n    const dia = new Date(e.target.value).getUTCDay(); \r\n\r\n    //* Guardando hora del input\r\n    const horaReserva = new Date(e.target.value)\r\n          .toLocaleTimeString([],{hour: '2-digit', minute: '2-digit'});\r\n    const [hora ,] = horaReserva.split(':');\r\n\r\n    //* Guardando hora y fecha \r\n    const horaFecha = e.target.value.split('T').join(' ');\r\n\r\n    // console.log(dia);\r\n    // console.log(horaReserva);\r\n    // console.log(hora);\r\n    // console.log(e.target.value);\r\n\r\n    //* Si la hora está en el rango de 10:00 a 22:00 ...\r\n    if(hora < 10 || hora > 22){\r\n      mostrarAlerta('Hora no válida','error','.formulario');\r\n      e.target.value = ''; //* Dejando el input fecha vacío\r\n\r\n    }else{ //* Si no es sábado ni domingo...\r\n      reserva.fechaSalida = horaFecha; //* Guardando fecha y hora seleccionada en objeto 'reserva'\r\n    }\r\n    \r\n  });\r\n}\r\n\r\n\r\nfunction mostrarResumen(){\r\n  const resumen = document.querySelector('.contenido-resumen');\r\n\r\n  //* Limpiar el contenido resumen\r\n  while (resumen.firstElementChild) {\r\n    resumen.removeChild(resumen.firstElementChild);\r\n  } \r\n\r\n  // console.log(Object.values(reserva));\r\n  //* Si al menos una propiedad del objeto 'reserva' está vacío o el arreglo de servicios está vacío...\r\n  if (Object.values(reserva).includes('') || reserva.servicios.length === 0) { \r\n    mostrarAlerta('Faltan datos de Servicios, Fecha u Hora','error','.contenido-resumen',false);\r\n\r\n    return;\r\n  }\r\n\r\n  //? Formatear el div de resumen\r\n  const { nombre, fechaLlegada, fechaSalida, subtotal, total, servicios} = reserva; //* Guardando datos de la reserva\r\n\r\n\r\n  //? Heading para servicios en resumen\r\n  const headingServicios = document.createElement('h3');\r\n  headingServicios.textContent = 'Resumen de Servicios';\r\n  resumen.appendChild(headingServicios);\r\n\r\n\r\n  //? Iterando y mostrando los servicios \r\n  servicios.forEach(servicio => {\r\n    const {precio, tipo, tipo_cama} = servicio;\r\n\r\n    const contenedorServicio = document.createElement('div');\r\n    contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n    const tipoServicio = document.createElement('p');\r\n    tipoServicio.innerHTML = /*html*/`<span>Tipo Habitación:</span> ${tipo}`;\r\n    \r\n    const precioServicio = document.createElement('p');\r\n    precioServicio.innerHTML = /*html*/`<span>Precio:</span> $${precio}`;\r\n\r\n    const camaServicio = document.createElement('p');\r\n    camaServicio.innerHTML = /*html*/`<span>Tipo Cama:</span> ${tipo_cama}`;\r\n\r\n    contenedorServicio.appendChild(tipoServicio);\r\n    contenedorServicio.appendChild(precioServicio);\r\n    contenedorServicio.appendChild(camaServicio);\r\n\r\n    resumen.appendChild(contenedorServicio);\r\n  });\r\n\r\n  //? Heading para reserva en resumen\r\n  const headingReserva = document.createElement('h3');\r\n  headingReserva.textContent = 'Resumen de reserva';\r\n  resumen.appendChild(headingReserva);\r\n\r\n  //? Formatear la fechas en español\r\n  const fechaLlegadaObj = new Date(fechaLlegada); //* Fecha Llegada seleccionada de la reserva\r\n  const fechaSalidaObj = new Date(fechaSalida); //* Fecha Salida seleccionada de la reserva\r\n  const fechaLlegadaFormateada = formatearFecha(fechaLlegadaObj);\r\n  const fechaSalidaFormateada = formatearFecha(fechaSalidaObj);\r\n\r\n  //? Agregando datos de la reserva\r\n  const nombreCliente = document.createElement('p');\r\n  nombreCliente.innerHTML = /*html*/`<span>Cliente:</span> ${nombre}`;\r\n\r\n  const entradaReserva = document.createElement('p');\r\n  entradaReserva.innerHTML = /*html*/`<span>Fecha Llegada:</span> ${fechaLlegadaFormateada}`;\r\n\r\n  const salidaReserva = document.createElement('p');\r\n  salidaReserva.innerHTML = /*html*/`<span>Fecha Salida:</span> ${fechaSalidaFormateada}`;\r\n\r\n  const costoReserva = document.createElement('p');\r\n  costoReserva.innerHTML = /*html*/`<span>Costo Total:</span> $${total}`;\r\n\r\n\r\n  //? Boton para crear una reserva\r\n  const botonReservar = document.createElement('button');\r\n  botonReservar.classList.add('boton');\r\n  botonReservar.textContent = 'Reservar';\r\n  botonReservar.onclick = reservarHabitacion; \r\n\r\n  resumen.appendChild(nombreCliente);\r\n  resumen.appendChild(entradaReserva);\r\n  resumen.appendChild(salidaReserva);\r\n  resumen.appendChild(costoReserva);\r\n\r\n  resumen.appendChild(botonReservar);\r\n\r\n}\r\n\r\nfunction formatearFecha(fecha){\r\n  //* 'long' formatea la fecha a palabra y 'numeric' a número. '2-digit' establece a dos digitos la hora\r\n  const opciones = { \r\n    weekday: 'long', \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric', \r\n    hour: '2-digit', \r\n    minute: '2-digit', \r\n  }\r\n\r\n\r\n  //* UTC() devuelve la fecha con el estándar de tiempo del meridiano de greenwich\r\n  // const fechaUTC = new Date(Date.UTC(anio,mes,dia,horas,minutos));\r\n  const fechaFormateada = fecha.toLocaleString([],opciones);\r\n  // console.log(fechaFormateada);\r\n\r\n  return fechaFormateada;\r\n}\r\n\r\nasync function reservarHabitacion(){\r\n  const {id, fechaLlegada, fechaSalida, servicios, subtotal, total} = reserva; \r\n\r\n  const tipoServicios = servicios.map(servicio => `Habitación ${servicio.tipo}`).join(', ');\r\n  // console.log(tipoServicios);\r\n\r\n  const datos = new FormData();\r\n  datos.append('servicios',tipoServicios);\r\n  datos.append('fecha_llegada',fechaLlegada);\r\n  datos.append('fecha_salida',fechaSalida);\r\n  datos.append('subtotal',subtotal);\r\n  datos.append('total',total);\r\n  datos.append('cliente_id',id);\r\n  // console.log([...datos]);\r\n\r\n  //* Petición hacia la API\r\n  const url = 'http://127.0.0.1:3000/api/reservas';\r\n  const respuesta = await fetch(url,{\r\n    method: 'POST',\r\n    body: datos,\r\n  }); \r\n  const resultado = await respuesta.json();\r\n  console.log(resultado);\r\n\r\n  try {\r\n    if (resultado.resultado) { //* Si se reserva una reserva correctamente...\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'reserva Creada',\r\n        text: 'Tu reserva fue creada correctamente',\r\n        button: 'OK',\r\n        customClass: {\r\n          popup: 'modal',\r\n          title: 'modal-title',\r\n          htmlContainer: 'modal-warning',\r\n          actions: 'modal-btns',\r\n          confirmButton: 'modal-btn-confirm',\r\n        }\r\n      })\r\n      .then(() => {\r\n        setTimeout(() => {\r\n          location.reload(); //* Recargando página\r\n        }, 2000);\r\n      });\r\n    }\r\n  } catch (error) {\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar la reserva',\r\n    })\r\n  }\r\n\r\n}\r\n\r\nfunction  mostrarAlerta(mensaje,tipo, elemento,desaparece = true){\r\n  //? Previniendo que se genera más de una alerta de error \r\n  const alertaPrevia = document.querySelector('.alerta');\r\n  if (alertaPrevia) alertaPrevia.remove(); //* Si ya existe una alerta para el input se elimina\r\n  \r\n  //? Scripting para crear la alerta \r\n  const alerta = document.createElement('div');\r\n  alerta.textContent = mensaje;\r\n  alerta.classList.add('alerta',tipo);\r\n\r\n  const referencia = document.querySelector(elemento);\r\n  referencia.appendChild(alerta);\r\n\r\n  if (desaparece) {\r\n    setTimeout(() => {\r\n      referencia.removeChild(alerta);\r\n    }, 3000);\r\n  }\r\n}"]}
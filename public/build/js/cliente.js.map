{"version":3,"sources":["cliente.js"],"names":["paso","pasoInicial","pasoFinal","reserva","nombre","fechaLlegada","fechaSalida","subtotal","total","servicios","iniciarApp","mostrarSeccion","tabs","botonesPaginador","paginaAnterior","paginaSiguiente","consultaAPI","nombreCliente","seleccionarFechaLlegada","seleccionarFechaSalida","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","add","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","async","url","resultado","fetch","mostrarServicios","json","error","console","log","filtrarHabitacion","habitaciones","filtro","matches","filter","habitacion","tipo","limpiarHTML","servicio","id","precio","descripcion","tipo_cama","precioFormat","Intl","NumberFormat","format","nombreServicio","createElement","textContent","precioServicio","descripcionServicio","camaServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","divServicio","some","agregado","value","Date","getUTCDay","horaReserva","toLocaleTimeString","hour","minute","hora","split","horaFecha","join","mostrarAlerta","resumen","firstElementChild","removeChild","Object","values","includes","length","totalFormat","headingServicios","contenedorServicio","tipoServicio","innerHTML","headingReserva","fechaLlegadaObj","fechaSalidaObj","fechaLlegadaFormateada","formatearFecha","fechaSalidaFormateada","entradaReserva","salidaReserva","costoReserva","botonReservar","reservarHabitacion","fecha","toLocaleString","weekday","year","month","day","tipoServicios","map","datos","FormData","append","respuesta","method","body","Swal","fire","icon","title","text","button","customClass","popup","htmlContainer","actions","confirmButton","then","setTimeout","location","reload","mensaje","elemento","desaparece","alertaPrevia","alerta","referencia","$elemento"],"mappings":"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","file":"cliente.js","sourcesContent":["let paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\n\r\n//* Objeto de plantilla en donde se guardará la info seleccionada por el usuario\r\nconst reserva = {\r\n  nombre: '',\r\n  fechaLlegada: '',\r\n  fechaSalida: '',\r\n  subtotal: 0,\r\n  total: 0,\r\n  servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded',() => iniciarApp());\r\n\r\n\r\n\r\nfunction iniciarApp(){\r\n  mostrarSeccion(); //* Muestra y oculta las secciones\r\n  tabs(); //* Cambia la sección cuando se presionen los tabs\r\n  botonesPaginador(); //* Agrega o quita los botones del paginador\r\n  paginaAnterior(); //* Boton que traslada a la sección anterior si es que la hay\r\n  paginaSiguiente();  //* Boton que traslada a la sección siguiente si es que la hay\r\n\r\n  consultaAPI(); //* Consulta la API para mostrar todos los servicios\r\n  \r\n  // idCliente(); //* Añade el id del cliente del input al objeto 'reserva'\r\n  nombreCliente(); //* Añade el nombre del cliente del input al objeto 'reserva'\r\n  seleccionarFechaLlegada(); //* Añade la fecha de Llegada de la reserva del input al objeto 'reserva'\r\n  seleccionarFechaSalida(); //* Aña la  la fecha de salida de la reserva del input al objeto 'reserva'\r\n\r\n  mostrarResumen(); //* Muestra el resumen de la reserva\r\n\r\n} \r\n\r\n// TODO: Funcionalidades de Reservas de Cliente\r\n\r\nfunction mostrarSeccion(){\r\n  //* Ocultar las secciones que no corresponden a su respectivo tab\r\n  const seccionAnterior = document.querySelector('.mostrar');\r\n  \r\n  if (seccionAnterior) { //* Si existe una seccion con la clase .mostrar ....\r\n    seccionAnterior.classList.remove('mostrar');\r\n  }\r\n  \r\n  //* Seleccionar la seccion con el paso\r\n  const seccion = document.querySelector(`#paso-${paso}`);\r\n  seccion.classList.add('mostrar');\r\n  \r\n   //* Ocultar los tabs que no corresponden a su respectiva seccion\r\n   const tabAnterior = document.querySelector('.actual');\r\n   tabAnterior.classList.remove('actual');\r\n   \r\n   //* Resalta el tab actual\r\n   const tab = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n   tab.classList.add('actual');\r\n   \r\n   \r\n  }\r\n  \r\n  function tabs(){\r\n  const botones = document.querySelectorAll('.tabs button'); //* todos los <button> de la navegacion\r\n\r\n  botones.forEach(boton => {\r\n    boton.addEventListener('click',e => {\r\n      paso = parseInt(e.target.dataset.paso); //* Guarda data-attribute del boton clickeado\r\n\r\n      mostrarSeccion();\r\n\r\n      botonesPaginador(); \r\n    });\r\n\r\n  });\r\n}\r\n\r\nfunction botonesPaginador(){\r\n  const paginaAnterior = document.querySelector('#anterior');\r\n  const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n  if (paso === 1) {\r\n    paginaAnterior.classList.add('ocultar');\r\n    paginaSiguiente.classList.remove('ocultar');\r\n  }else if(paso === 2) {\r\n    paginaAnterior.classList.remove('ocultar');\r\n    paginaSiguiente.classList.remove('ocultar');\r\n  }else if(paso === 3) {\r\n    paginaAnterior.classList.remove('ocultar');\r\n    paginaSiguiente.classList.add('ocultar');\r\n    mostrarResumen(); //* Mostrando sección de resumen\r\n  }\r\n\r\n  mostrarSeccion();\r\n}\r\n\r\nfunction paginaAnterior(){\r\n  const paginaAnterior = document.querySelector('#anterior');\r\n\r\n  paginaAnterior.addEventListener('click',() => {\r\n    if (paso <= pasoInicial) return;\r\n    \r\n    // console.log(paso);\r\n    paso--;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n  const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n  paginaSiguiente.addEventListener('click',() => {\r\n    if (paso >= pasoFinal) return;\r\n\r\n    // console.log(paso);\r\n    paso++;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nasync function consultaAPI(){\r\n  try {\r\n    const url = 'http://127.0.0.1:3000/api/habitaciones';\r\n    const resultado = await fetch(url); //* Esperando a que se devuelva la petición completa\r\n    const servicios = await resultado.json();\r\n    // console.log(servicios);\r\n\r\n    mostrarServicios(servicios);\r\n\r\n    // filtrarHabitacion(servicios);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\n\r\nfunction filtrarHabitacion(habitaciones) {\r\n  console.log(habitaciones);\r\n  let filtro = [];\r\n\r\n  const $filtrosHabitaciones = document.querySelector('.habitacion-filtros');\r\n\r\n  $filtrosHabitaciones.addEventListener('click', e => {\r\n\r\n    if (e.target.matches('#filtro-todos')) {\r\n      mostrarServicios(habitaciones);\r\n    }\r\n\r\n    if (e.target.matches('#filtro-king')) {\r\n      filtro = habitaciones.filter(habitacion =>habitacion.tipo === 'King');\r\n    }\r\n\r\n    if (e.target.matches('#filtro-triple')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Triple');\r\n      mostrarServicios(filtro);\r\n    }\r\n\r\n    if (e.target.matches('#filtro-duplex')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Duplex');\r\n      mostrarServicios(filtro);\r\n      \r\n    }\r\n\r\n    if (e.target.matches('#filtro-individual')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Individual');\r\n      mostrarServicios(filtro);\r\n    }\r\n\r\n    if (e.target.matches('#filtro-doble')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Doble');\r\n      mostrarServicios(filtro);\r\n    }\r\n\r\n    if (e.target.matches('#filtro-moderna')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Moderna');\r\n      mostrarServicios(filtro);\r\n    }\r\n\r\n    if (e.target.matches('#filtro-clasica')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Clasica');\r\n      mostrarServicios(filtro);\r\n    }\r\n\r\n    if (e.target.matches('#filtro-estudio')) {\r\n      filtro = habitaciones.filter(habitacion => habitacion.tipo === 'Estudio');\r\n      mostrarServicios(filtro);\r\n    }\r\n\r\n  });\r\n}\r\n\r\nfunction mostrarServicios(servicios) {\r\n  const $habitaciones = document.querySelector('#servicios');\r\n  limpiarHTML($habitaciones);\r\n\r\n  servicios.forEach(servicio => {\r\n    const {id, tipo, precio, descripcion, tipo_cama } = servicio;\r\n\r\n    //* Formatea un número a peso dependiendo del pais \r\n    const precioFormat = new Intl.NumberFormat().format(precio);\r\n\r\n    const nombreServicio = document.createElement('p');\r\n    nombreServicio.classList.add('nombre-servicio','third-text-color');\r\n    nombreServicio.textContent = `Habitación ${tipo}`;\r\n\r\n    const precioServicio = document.createElement('p');\r\n    precioServicio.classList.add('precio-servicio','text-left');\r\n    precioServicio.textContent = `$${precioFormat}`;\r\n\r\n    const descripcionServicio = document.createElement('p');\r\n    descripcionServicio.classList.add('descripcion-servicio','text-left');\r\n    descripcionServicio.textContent = descripcion;\r\n    \r\n    const camaServicio = document.createElement('p');\r\n    camaServicio.classList.add('cama-servicio','text-left');\r\n    camaServicio.textContent = `Cama ${tipo_cama}`;\r\n\r\n    const servicioDiv = document.createElement('div');\r\n    servicioDiv.classList.add('servicio');\r\n    servicioDiv.dataset.idServicio = id;\r\n    servicioDiv.onclick = () => seleccionarServicio(servicio);\r\n\r\n    servicioDiv.appendChild(nombreServicio);\r\n    servicioDiv.appendChild(descripcionServicio);\r\n    servicioDiv.appendChild(camaServicio);\r\n    servicioDiv.appendChild(precioServicio);\r\n\r\n    document.querySelector('#servicios').appendChild(servicioDiv);\r\n    \r\n  });\r\n}\r\n\r\nfunction seleccionarServicio(servicio){\r\n  const { id,precio } = servicio; //* Id de servicio seleccionado\r\n  const { servicios } = reserva; //* Arreglo de servicios a llenar\r\n\r\n  //* Identificando al elemento que se le da click \r\n  const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n  // console.log(divServicio);\r\n\r\n  //? Comprobar si un servicio ya fue agregado\r\n  if (servicios.some(agregado => agregado.id === id)) { //*Si el id que existe en memoria es igual al agregar\r\n    //* Eliminar servicio\r\n    reserva.servicios = servicios.filter(agregado => agregado.id !== id);\r\n    divServicio.classList.remove('seleccionado');\r\n    reserva.total -= parseInt(precio);\r\n    reserva.subtotal -= parseInt(precio);\r\n  }else{ //* Si no son iguales los Ids\r\n    //* Agregar servicio \r\n    reserva.servicios = [...servicios, servicio]; //* Agregando nuevo servicio y servicios que existian ya\r\n    divServicio.classList.add('seleccionado');\r\n    reserva.total += parseInt(precio);\r\n    reserva.subtotal += parseInt(precio);\r\n  }\r\n  \r\n\r\n\r\n\r\n  // console.log(servicio);\r\n  console.log(reserva);\r\n\r\n}\r\n\r\n\r\n\r\nfunction nombreCliente(){\r\n  const nombre = document.querySelector('#nombre').value;\r\n  reserva.nombre = nombre;\r\n  // console.log(reserva);\r\n}\r\n\r\nfunction  seleccionarFechaLlegada(){\r\n  const inputFechaLlegada = document.querySelector('#fecha_llegada');\r\n  // console.log(inputFecha);\r\n  inputFechaLlegada.addEventListener('input',(e) => {\r\n    //* Guardando dia de la semana de la fecha seleccionada\r\n    const dia = new Date(e.target.value).getUTCDay(); \r\n\r\n    //* Guardando hora del input\r\n    const horaReserva = new Date(e.target.value)\r\n          .toLocaleTimeString([],{hour: '2-digit', minute: '2-digit'});\r\n    const [hora ,] = horaReserva.split(':');\r\n\r\n    //* Guardando hora y fecha \r\n    const horaFecha = e.target.value.split('T').join(' ');\r\n\r\n    // console.log(dia);\r\n    // console.log(horaReserva);\r\n    // console.log(hora);\r\n    // console.log(e.target.value);\r\n\r\n    //* Si la hora está en el rango de 10:00 a 22:00 ...\r\n    if(hora < 10 || hora > 22){\r\n      mostrarAlerta('Hora no válida','error','.formulario');\r\n      e.target.value = ''; //* Dejando el input fecha vacío\r\n    }else{ //* Si no...\r\n      reserva.fechaLlegada = horaFecha; //* Guardando fecha y hora seleccionada en objeto 'reserva'\r\n    }\r\n  \r\n  });\r\n}\r\n\r\nfunction seleccionarFechaSalida(){\r\n  const inputFechaSalida = document.querySelector('#fecha_salida');\r\n  // console.log(inputFecha);\r\n  inputFechaSalida.addEventListener('input',(e) => {\r\n    //* Guardando dia de la semana de la fecha seleccionada\r\n    const dia = new Date(e.target.value).getUTCDay(); \r\n\r\n    //* Guardando hora del input\r\n    const horaReserva = new Date(e.target.value)\r\n          .toLocaleTimeString([],{hour: '2-digit', minute: '2-digit'});\r\n    const [hora ,] = horaReserva.split(':');\r\n\r\n    //* Guardando hora y fecha \r\n    const horaFecha = e.target.value.split('T').join(' ');\r\n\r\n    // console.log(dia);\r\n    // console.log(horaReserva);\r\n    // console.log(hora);\r\n    // console.log(e.target.value);\r\n\r\n    //* Si la hora está en el rango de 10:00 a 22:00 ...\r\n    if(hora < 10 || hora > 22){\r\n      mostrarAlerta('Hora no válida','error','.formulario');\r\n      e.target.value = ''; //* Dejando el input fecha vacío\r\n\r\n    }else{ //* Si no es sábado ni domingo...\r\n      reserva.fechaSalida = horaFecha; //* Guardando fecha y hora seleccionada en objeto 'reserva'\r\n    }\r\n    \r\n  });\r\n}\r\n\r\n\r\nfunction mostrarResumen(){\r\n  const resumen = document.querySelector('.contenido-resumen');\r\n\r\n  //* Limpiar el contenido resumen\r\n  while (resumen.firstElementChild) {\r\n    resumen.removeChild(resumen.firstElementChild);\r\n  } \r\n\r\n  // console.log(Object.values(reserva));\r\n  //* Si al menos una propiedad del objeto 'reserva' está vacío o el arreglo de servicios está vacío...\r\n  if (Object.values(reserva).includes('') || reserva.servicios.length === 0) { \r\n    mostrarAlerta('Faltan datos de Servicios, Fecha u Hora','error','.contenido-resumen',false);\r\n\r\n    return;\r\n  }\r\n\r\n  //? Formatear el div de resumen\r\n  const { nombre, fechaLlegada, fechaSalida, subtotal, total, servicios} = reserva; //* Guardando datos de la reserva\r\n\r\n  //? Formatea un número a peso dependiendo del pais \r\n  const totalFormat = new Intl.NumberFormat().format(total);\r\n\r\n  //? Heading para servicios en resumen\r\n  const headingServicios = document.createElement('h3');\r\n  headingServicios.textContent = 'Resumen de Servicios';\r\n  resumen.appendChild(headingServicios);\r\n\r\n  \r\n  //? Iterando y mostrando los servicios \r\n  servicios.forEach(servicio => {\r\n    const {precio, tipo, tipo_cama} = servicio;\r\n    \r\n    //? Formatea un número a peso dependiendo del pais \r\n    const precioFormat = new Intl.NumberFormat().format(precio);\r\n\r\n    const contenedorServicio = document.createElement('div');\r\n    contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n    const tipoServicio = document.createElement('p');\r\n    tipoServicio.innerHTML = /*html*/`<span>Tipo Habitación:</span> ${tipo}`;\r\n    \r\n    const precioServicio = document.createElement('p');\r\n    precioServicio.innerHTML = /*html*/`<span>Precio:</span> $${precioFormat}`;\r\n\r\n    const camaServicio = document.createElement('p');\r\n    camaServicio.innerHTML = /*html*/`<span>Tipo Cama:</span> ${tipo_cama}`;\r\n\r\n    contenedorServicio.appendChild(tipoServicio);\r\n    contenedorServicio.appendChild(precioServicio);\r\n    contenedorServicio.appendChild(camaServicio);\r\n\r\n    resumen.appendChild(contenedorServicio);\r\n  });\r\n\r\n  //? Heading para reserva en resumen\r\n  const headingReserva = document.createElement('h3');\r\n  headingReserva.textContent = 'Resumen de reserva';\r\n  resumen.appendChild(headingReserva);\r\n\r\n  //? Formatear la fechas en español\r\n  const fechaLlegadaObj = new Date(fechaLlegada); //* Fecha Llegada seleccionada de la reserva\r\n  const fechaSalidaObj = new Date(fechaSalida); //* Fecha Salida seleccionada de la reserva\r\n  const fechaLlegadaFormateada = formatearFecha(fechaLlegadaObj);\r\n  const fechaSalidaFormateada = formatearFecha(fechaSalidaObj);\r\n\r\n  //? Agregando datos de la reserva\r\n  const nombreCliente = document.createElement('p');\r\n  nombreCliente.innerHTML = /*html*/`<span>Cliente:</span> ${nombre}`;\r\n\r\n  const entradaReserva = document.createElement('p');\r\n  entradaReserva.innerHTML = /*html*/`<span>Fecha Llegada:</span> ${fechaLlegadaFormateada}`;\r\n\r\n  const salidaReserva = document.createElement('p');\r\n  salidaReserva.innerHTML = /*html*/`<span>Fecha Salida:</span> ${fechaSalidaFormateada}`;\r\n\r\n  const costoReserva = document.createElement('p');\r\n  costoReserva.innerHTML = /*html*/`<span>Costo Total:</span> $${totalFormat}`;\r\n\r\n\r\n  //? Boton para crear una reserva\r\n  const botonReservar = document.createElement('button');\r\n  botonReservar.classList.add('boton');\r\n  botonReservar.textContent = 'Reservar';\r\n  botonReservar.onclick = reservarHabitacion; \r\n\r\n  resumen.appendChild(nombreCliente);\r\n  resumen.appendChild(entradaReserva);\r\n  resumen.appendChild(salidaReserva);\r\n  resumen.appendChild(costoReserva);\r\n\r\n  resumen.appendChild(botonReservar);\r\n\r\n}\r\n\r\nfunction formatearFecha(fecha){\r\n  //* 'long' formatea la fecha a palabra y 'numeric' a número. '2-digit' establece a dos digitos la hora\r\n  const opciones = { \r\n    weekday: 'long', \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric', \r\n    hour: '2-digit', \r\n    minute: '2-digit', \r\n  }\r\n\r\n\r\n  //* UTC() devuelve la fecha con el estándar de tiempo del meridiano de greenwich\r\n  // const fechaUTC = new Date(Date.UTC(anio,mes,dia,horas,minutos));\r\n  const fechaFormateada = fecha.toLocaleString([],opciones);\r\n  // console.log(fechaFormateada);\r\n\r\n  return fechaFormateada;\r\n}\r\n\r\nasync function reservarHabitacion(){\r\n  const {id, fechaLlegada, fechaSalida, servicios, subtotal, total} = reserva; \r\n\r\n  const tipoServicios = servicios.map(servicio => `Habitación ${servicio.tipo}`).join(', ');\r\n  console.log(tipoServicios);\r\n\r\n  const datos = new FormData(); \r\n  datos.append('servicios',tipoServicios);\r\n  datos.append('fecha_llegada',fechaLlegada);\r\n  datos.append('fecha_salida',fechaSalida);\r\n  datos.append('subtotal',subtotal);\r\n  datos.append('total',total);\r\n  // datos.append('cliente_id',id);\r\n  // console.log([...datos]);\r\n\r\n  //* Petición hacia la API\r\n  const url = 'http://127.0.0.1:3000/api/reservas';\r\n  const respuesta = await fetch(url,{\r\n    method: 'POST',\r\n    body: datos,\r\n  }); \r\n  const resultado = await respuesta.json();\r\n  console.log(resultado);\r\n\r\n  try {\r\n    if (resultado.resultado) { //* Si se reserva una reserva correctamente...\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'reserva Creada',\r\n        text: 'Tu reserva fue creada correctamente',\r\n        button: 'OK',\r\n        customClass: {\r\n          popup: 'modal',\r\n          title: 'modal-title',\r\n          htmlContainer: 'modal-warning',\r\n          actions: 'modal-btns',\r\n          confirmButton: 'modal-btn-confirm',\r\n        }\r\n      })\r\n      .then(() => {\r\n        setTimeout(() => {\r\n          location.reload(); //* Recargando página\r\n        }, 2000);\r\n      });\r\n    }\r\n  } catch (error) {\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar la reserva',\r\n    })\r\n  }\r\n\r\n}\r\n\r\nfunction  mostrarAlerta(mensaje,tipo, elemento,desaparece = true){\r\n  //? Previniendo que se genera más de una alerta de error \r\n  const alertaPrevia = document.querySelector('.alerta');\r\n  if (alertaPrevia) alertaPrevia.remove(); //* Si ya existe una alerta para el input se elimina\r\n  \r\n  //? Scripting para crear la alerta \r\n  const alerta = document.createElement('div');\r\n  alerta.textContent = mensaje;\r\n  alerta.classList.add('alerta',tipo);\r\n\r\n  const referencia = document.querySelector(elemento);\r\n  referencia.appendChild(alerta);\r\n\r\n  if (desaparece) {\r\n    setTimeout(() => {\r\n      referencia.removeChild(alerta);\r\n    }, 3000);\r\n  }\r\n}\r\n\r\nfunction limpiarHTML($elemento) {\r\n  while ($elemento.firstElementChild) {\r\n    $elemento.firstElementChild.remove();\r\n  }\r\n}"]}
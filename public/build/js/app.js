const ls=localStorage,$panelAdmin=document.querySelector(".panel-admin"),$btnMenu=document.querySelector(".boton-menu"),$opcionesMenu=document.querySelectorAll(".navegacion summary");let textoOpciones=[];function iniciarApp(){quitarAlerta(),mostrarConfirmacionEliminar(),colapsarMenu(),storageMenu(),mostrarEstadisticas()}function mostrarEstadisticas(){"/estadisticas"===location.pathname&&(mostrarGraficaVentas(),mostrarGraficaUsuarios(),mostrarGraficaEstados())}async function mostrarGraficaEstados(){try{const e="http://127.0.0.1:3000/api/estados",t=await fetch(e),n=await t.json(),a=n.map(({ESTADO:e})=>e);mostrarGrafica(...["graficoEstados","doughnut",a,"N° habitaciones por Estado",n.map(({NRO_HABITACIONES:e})=>parseInt(e)),["#329f00","#b8a11e","#cb0000","#2020d9"],"#fff"])}catch(e){console.log(e)}}async function mostrarGraficaUsuarios(){try{const e="http://127.0.0.1:3000/api/usuarios",t=await fetch(e),n=await t.json(),a=n.map(({ROL:e})=>e);mostrarGrafica(...["graficoUsuarios","bar",a,"N° de Usuarios según su Rol",n.map(({NRO_USUARIOS:e})=>e),["#14192D80","#00808080","#CD5C5C80","#222"],["#14192D","#008080","#CD5C5C","#222"]])}catch(e){console.log(e)}}async function mostrarGraficaVentas(){try{const e="http://127.0.0.1:3000/api/ventas",t=await fetch(e),n=await t.json(),a=n.map(({MES:e})=>{switch(parseInt(e)){case 1:return"Enero";case 2:return"Febrero";case 3:return"Marzo";case 4:return"Abril";case 5:return"Mayo";case 6:return"Junio";case 7:return"Julio";case 8:return"Agosto";case 9:return"Septiembre";case 10:return"Octubre";case 11:return"Noviembre";case 12:return"Diciembre"}});mostrarGrafica(...["graficoVentas","line",a,"Ventas por mes",n.map(({VENTA_MES:e})=>parseInt(e)),"#b8a11e","#b8a11e80",{scales:{y:{beginAtZero:!0}}}])}catch(e){console.log(e)}}function mostrarGrafica(e,t,n,a,o,r,s,i){const c=document.getElementById(e).getContext("2d");new Chart(c,{type:t,data:{labels:n,datasets:[{label:a,data:o,backgroundColor:r,borderColor:s,borderWidth:1}]},options:i})}function quitarAlerta(){const e=document.querySelector(".alerta");!document.body.contains(e)||location.pathname.includes("/crear")||location.pathname.includes("/actualizar")||(setTimeout(()=>{e.classList.add("active")},3e3),setTimeout(()=>{e.remove()},4e3))}function mostrarConfirmacionEliminar(){const e=document.querySelectorAll(".formulario-eliminar");if("/usuarios"===location.pathname)mostrarConfirmacion(e,"¿Estas seguro que quieres eliminar un usuario?");else if("/habitaciones"===location.pathname)mostrarConfirmacion(e,"¿Estas seguro que quieres eliminar una habitación?");else if("/clientes"===location.pathname)mostrarConfirmacion(e,"¿Estas seguro que quieres eliminar un cliente?");else{if("/huespedes"!==location.pathname)return;mostrarConfirmacion(e,"¿Estas seguro que quieres eliminar un huésped?")}}function colapsarMenu(){hoverBtnMenu($btnMenu,"&larr;","Menú de Administración"),$btnMenu.addEventListener("click",e=>{$opcionesMenu.forEach((e,t)=>{textoOpciones=[...textoOpciones,e.lastChild.textContent],e.parentElement.classList.contains("active")?(hoverBtnMenu($btnMenu,"&larr;","Menú de Administración"),$panelAdmin.style.gridTemplateColumns="20% 80%",ls.setItem("menuColapsado","20% 80%"),e.lastChild.textContent=textoOpciones[t],e.parentElement.classList.remove("active"),e.nextElementSibling.classList.remove("active")):(hoverBtnMenu($btnMenu,"&rarr;","&rarr;"),$panelAdmin.style.gridTemplateColumns="8% 92%",ls.setItem("menuColapsado","8% 92%"),e.lastChild.textContent="",e.parentElement.classList.add("active"),e.nextElementSibling.classList.add("active"))})})}function storageMenu(){null===ls.getItem("menuColapsado")&&ls.setItem("menuColapsado","20% 80%"),"20% 80%"===ls.getItem("menuColapsado")&&$opcionesMenu.forEach((e,t)=>{textoOpciones=[...textoOpciones,e.lastChild.textContent],hoverBtnMenu($btnMenu,"&larr;","Menú de Administración"),$panelAdmin.style.gridTemplateColumns="20% 80%",ls.setItem("menuColapsado","20% 80%"),e.lastChild.textContent=textoOpciones[t],e.parentElement.classList.remove("active"),e.nextElementSibling.classList.remove("active")}),"8% 92%"===ls.getItem("menuColapsado")&&($btnMenu.innerHTML="&rarr;",$opcionesMenu.forEach((e,t)=>{textoOpciones=[...textoOpciones,e.lastChild.textContent],hoverBtnMenu($btnMenu,"&rarr;","&rarr;"),$panelAdmin.style.gridTemplateColumns="8% 92%",ls.setItem("menuColapsado","8% 92%"),e.lastChild.textContent="",e.parentElement.classList.add("active"),e.nextElementSibling.classList.add("active")}))}function hoverBtnMenu(e,t,n){e.style.transition="all 0.4s ease-in",e.addEventListener("mouseover",e=>{e.target.style.fontSize="1.6rem",e.target.style.fontWeight="700",e.target.innerHTML=t}),e.addEventListener("mouseout",e=>{e.target.style.fontSize="1.6rem",e.target.innerHTML=n})}function mostrarConfirmacion(e,t){e.forEach(e=>{e.addEventListener("submit",e=>{e.preventDefault(),modalConfirmacion(e.target,t)})})}function modalConfirmacion(e,t){Swal.fire({title:t,text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Elimínalo!",cancelButtonText:"Cancelar",customClass:{popup:"modal",icon:"modal-icon",title:"modal-title",htmlContainer:"modal-warning",actions:"modal-btns",confirmButton:"modal-btn-confirm",cancelButton:"modal-btn-cancel"}}).then(t=>{t.isConfirmed&&e.submit()})}document.addEventListener("DOMContentLoaded",()=>iniciarApp());
//# sourceMappingURL=app.js.map
